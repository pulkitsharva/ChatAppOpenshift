html
	body
		head
			script(src=' https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js')
			style
				#messages { height: 300px; width: 300px; overflow: hidden; border: #ccc solid 1px;}
				section { margin-left: 20px; }
			section
			h1 Chat Client #1
			div#messages
			textarea#chat(rows='2', cols='35')
			button(onclick='something()') Chat
			script(src='/faye/client.js')
			script.
				var something = function() {
				
				var $chat = $('#chat');
				console.log('something:'+$chat.val())
				var url = 'http://chat-yummyfoods.rhcloud.com/message';
				var message = {message: 'Client 1: ' + $chat.val()};
				var dataType = 'json';
				$.ajax({
				type: 'POST',
				'url': url,
				'data': message,
				'dataType': dataType,
				statusCode : {
					404 : function() {
					alert("Page not found.");
					},
					400 : function() {
					alert("Server understood the request but request content was invalid.");
					},
					401 : function() {
					alert("Unauthorised access.");
					},
					403 : function() {
					alert("Forbidden resouce can't be accessed");
					},
					500 : function() {
					alert("Internal Server Error.");
					},
					503 : function() {
					alert("Service Unavailable");
					}
				}
			});
				$chat.val('');
				}
				var WebSocket = new WebSocket('ws://chat-yummyfoods.rhcloud.com:8000');
				var client = new Faye.Client('/faye',{
				timeout: 20
				});
				
				client.subscribe('/channel', function(message) {
				$('#messages').append('<p>'+message.text+'</p>');
				})